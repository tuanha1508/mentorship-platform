<div class="dashboard-section">
    <div class="cards-container mentees-grid">
        <div class="no-mentees-message">
            <i class="fas fa-users fa-3x"></i>
            <p>You don't have any mentees yet.</p>
            <p>When mentees select you as their mentor, they will appear here.</p>
        </div>
        
        <!-- Mentee cards will be dynamically added here -->
        <div id="mentees-list" class="cards-container" style="display: none;">
            <!-- Example mentee card (will be created dynamically) -->
            <!--
            <div class="mentee-card">
                <div class="card-header">
                    <img src="../images/profile-placeholder.jpg" alt="Mentee" class="mentee-image">
                    <div class="mentee-info">
                        <h3 class="mentee-name">John Doe</h3>
                        <p class="mentee-goal">Web Development</p>
                    </div>
                </div>
                <div class="card-body">
                    <p>Progress: 30%</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: 30%"></div>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-primary view-mentee-btn">View Profile</button>
                    <button class="btn btn-secondary chat-mentee-btn">Chat</button>
                </div>
            </div>
            -->
        </div>
    </div>
</div>

<script>
    // Initialize the My Mentees page functionality
    if (!window.Dashboard) window.Dashboard = {};
    
    window.Dashboard.initMyMenteesPage = function() {
        console.log('Initializing My Mentees page');
        
        // Get user data
        const userData = JSON.parse(localStorage.getItem('userData') || '{}');
        const userId = userData.id;
        
        if (!userId) {
            console.error('User ID not found');
            return;
        }
        
        // Simulate fetching mentees (replace with actual API call)
        // In a real application, you would make an API call to get the mentees list
        setTimeout(() => {
            // If you have an API client:
            // apiClient.get('/api/mentors/' + userId + '/mentees')
            //    .then(response => displayMentees(response.data))
            //    .catch(error => {
            //        console.error('Error fetching mentees:', error);
            //        document.querySelector('.no-mentees-message').style.display = 'flex';
            //    });
            
            // For demo, show the no mentees message
            document.querySelector('.no-mentees-message').style.display = 'flex';
            document.getElementById('mentees-list').style.display = 'none';
        }, 500);
    };
    
    function displayMentees(mentees) {
        const menteesList = document.getElementById('mentees-list');
        
        if (!mentees || mentees.length === 0) {
            document.querySelector('.no-mentees-message').style.display = 'flex';
            menteesList.style.display = 'none';
            return;
        }
        
        document.querySelector('.no-mentees-message').style.display = 'none';
        menteesList.style.display = 'grid';
        menteesList.innerHTML = '';
        
        mentees.forEach(mentee => {
            const menteeCard = document.createElement('div');
            menteeCard.className = 'mentee-card';
            menteeCard.innerHTML = `
                <div class="card-header">
                    <img src="${mentee.profileImage || '../images/profile-placeholder.jpg'}" alt="Mentee" class="mentee-image">
                    <div class="mentee-info">
                        <h3 class="mentee-name">${mentee.name}</h3>
                        <p class="mentee-goal">${mentee.goal || 'No goal specified'}</p>
                    </div>
                </div>
                <div class="card-body">
                    <p>Progress: ${mentee.progress || 0}%</p>
                    <div class="progress-bar">
                        <div class="progress" style="width: ${mentee.progress || 0}%"></div>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-primary view-mentee-btn" data-mentee-id="${mentee.id}">View Profile</button>
                    <button class="btn btn-secondary chat-mentee-btn" data-mentee-id="${mentee.id}">Chat</button>
                </div>
            `;
            
            menteesList.appendChild(menteeCard);
        });
        
        // Add event listeners to buttons
        document.querySelectorAll('.view-mentee-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const menteeId = this.getAttribute('data-mentee-id');
                // View mentee profile (implement as needed)
                console.log('View mentee profile:', menteeId);
            });
        });
        
        document.querySelectorAll('.chat-mentee-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const menteeId = this.getAttribute('data-mentee-id');
                // Redirect to chat with this mentee
                window.location.hash = '#chat';
                // You might want to store the active chat contact
                localStorage.setItem('activeChat', menteeId);
            });
        });
    }
</script>

<style>
    .mentees-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .mentee-card {
        background-color: var(--card-bg);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
    }
    
    .mentee-card:hover {
        transform: translateY(-5px);
    }
    
    .card-header {
        display: flex;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid var(--border-color);
    }
    
    .mentee-image {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        margin-right: 15px;
    }
    
    .mentee-info {
        flex: 1;
    }
    
    .mentee-name {
        margin: 0;
        font-size: 18px;
        font-weight: 600;
    }
    
    .mentee-goal {
        margin: 5px 0 0;
        color: var(--secondary-color);
        font-size: 14px;
    }
    
    .card-body {
        padding: 15px;
    }
    
    .progress-bar {
        width: 100%;
        height: 8px;
        background-color: var(--border-color);
        border-radius: 4px;
        overflow: hidden;
        margin-top: 8px;
    }
    
    .progress {
        height: 100%;
        background-color: var(--primary-color);
    }
    
    .card-footer {
        display: flex;
        justify-content: space-between;
        padding: 15px;
        border-top: 1px solid var(--border-color);
    }
    
    .btn {
        padding: 8px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        transition: background-color 0.2s ease;
    }
    
    .btn-primary {
        background-color: var(--primary-color);
        color: white;
    }
    
    .btn-primary:hover {
        background-color: #0069d9;
    }
    
    .btn-secondary {
        background-color: var(--secondary-color);
        color: white;
    }
    
    .btn-secondary:hover {
        background-color: #5a6268;
    }
    
    .no-mentees-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 50px 20px;
        text-align: center;
        color: var(--secondary-color);
        grid-column: 1 / -1;
    }
    
    .no-mentees-message i {
        margin-bottom: 20px;
    }
    
    .no-mentees-message p {
        margin: 5px 0;
    }
</style>
